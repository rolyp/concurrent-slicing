open import ConcurrentSlicingCommon
import Relation.Binary.EqReasoning as EqReasoning

open import Transition.Concur.Cofinal.Lattice.Common
import Name as ·¥∫
import Name.Lattice as ·¥∫ÃÉ
import Ren as ·¥ø

module Transition.Concur.Cofinal.Lattice.case.nu-sync-x-x-nu-sync
   {Œì} {x u : Name Œì} {P‚ÇÄ Q‚ÇÄ R‚ÇÄ R‚Ä≤‚ÇÄ S‚ÇÄ S‚Ä≤‚ÇÄ} {E : P‚ÇÄ ‚Äî[ x ‚Ä¢ ·µá - _ ]‚Üí R‚ÇÄ}
   {E‚Ä≤ : P‚ÇÄ ‚Äî[ u ‚Ä¢ ·µá - _ ]‚Üí R‚Ä≤‚ÇÄ} {F : Q‚ÇÄ ‚Äî[ (‚Ä¢ x) ·µá - _ ]‚Üí S‚ÇÄ} {F‚Ä≤ : Q‚ÇÄ ‚Äî[ (‚Ä¢ u) ·µá - _ ]‚Üí S‚Ä≤‚ÇÄ}
   (ùê∏ : E ‚å£‚ÇÅ[ ·µá‚àá·µá ] E‚Ä≤) (ùêπ : F ‚å£‚ÇÅ[ À£‚àáÀ£ ] F‚Ä≤) (P : ‚Üì P‚ÇÄ) (Q : ‚Üì Q‚ÇÄ)
   (let P‚Ä≤‚ÇÄ = tgt‚ÇÅ (‚äñ‚ÇÅ ùê∏); P‚Ä≥‚ÇÄ = tgt‚ÇÇ(‚äñ‚ÇÅ ùê∏); Q‚Ä≤‚ÇÄ = tgt‚ÇÅ (‚äñ‚ÇÅ ùêπ); Q‚Ä≥‚ÇÄ = tgt‚ÇÇ(‚äñ‚ÇÅ ùêπ))
   (IH‚ÇÅ : braiding (·µá‚àá·µá {a = x ‚Ä¢} {u ‚Ä¢}) {0} (Œ≥‚ÇÅ ùê∏) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) (tgt E P)) ‚â° tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏)) (tgt E‚Ä≤ P))
   (IH‚ÇÇ : braiding (À£‚àáÀ£ {x = x} {u}) {0} (Œ≥‚ÇÅ ùêπ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ)) (tgt F Q)) ‚â° tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ)) (tgt F‚Ä≤ Q))
   (let Œ≥ = let open EqReasoning (setoid _) in
          begin
             (·¥ø.pop ·¥∫.zero *) ((·¥ø.suc id·∂† *) P‚Ä≤‚ÇÄ)
          ‚â°‚ü® cong (·¥ø.pop ·¥∫.zero *) (+-id-elim 1 P‚Ä≤‚ÇÄ) ‚ü©
             (·¥ø.pop ·¥∫.zero *) P‚Ä≤‚ÇÄ
          ‚â°‚ü® sym (pop-swap _) ‚ü©
             (·¥ø.pop ·¥∫.zero *) ((·¥ø.swap *) P‚Ä≤‚ÇÄ)
          ‚â°‚ü® cong (·¥ø.pop ·¥∫.zero *) (Œ≥‚ÇÅ ùê∏) ‚ü©
             (·¥ø.pop ·¥∫.zero *) P‚Ä≥‚ÇÄ
          ‚â°‚ü® cong (·¥ø.pop ·¥∫.zero *) (sym (+-id-elim 1 P‚Ä≥‚ÇÄ)) ‚ü©
             (·¥ø.pop ·¥∫.zero *) ((·¥ø.suc id·∂† *) P‚Ä≥‚ÇÄ)
          ‚àé
        Œ± : ŒΩ ((·¥ø.pop ·¥∫.zero *) ((·¥ø.suc id·∂† *) P‚Ä≤‚ÇÄ) ‚îÇ Q‚Ä≤‚ÇÄ) ‚â° Proc‚Ü± refl (ŒΩ ((·¥ø.pop ·¥∫.zero *) ((·¥ø.suc id·∂† *) P‚Ä≥‚ÇÄ) ‚îÇ Q‚Ä≥‚ÇÄ))
        Œ± = (cong ŒΩ_ (cong‚ÇÇ _‚îÇ_ Œ≥ (Œ≥‚ÇÅ ùêπ))) {-Œ≥-}) where

   module _
      (R : ‚Üì R‚ÇÄ) (R‚Ä≤ : ‚Üì R‚Ä≤‚ÇÄ) (S : ‚Üì S‚ÇÄ) (S‚Ä≤ : ‚Üì S‚Ä≤‚ÇÄ) (y y‚Ä≤ : ·¥∫ÃÉ.‚Üì_ {·¥∫.suc Œì} ·¥∫.zero) (‚â°R : tgt E P ‚â° R) (‚â°R‚Ä≤ : tgt E‚Ä≤ P ‚â° R‚Ä≤)
      (‚â°S : tgt F Q ‚â° S) (‚â°S‚Ä≤ : tgt F‚Ä≤ Q ‚â° S‚Ä≤) where

      postulate
         cheat : (y‚Ä† y‚Ä° : ‚Üì ·¥∫.zero) ‚Üí
                 (pop y‚Ä† *ÃÉ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) (tgt E P)) ‚âÖ (pop y‚Ä° *ÃÉ) ((swap *ÃÉ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) (tgt E P)))

         base : (P‚Ä≤ : ‚Üì (·¥ø.suc id·∂† *) P‚Ä≤‚ÇÄ) (Q‚Ä≤ : ‚Üì Q‚Ä≤‚ÇÄ) (P‚Ä≥ : ‚Üì (·¥ø.suc id·∂† *) P‚Ä≥‚ÇÄ) (Q‚Ä≥ : ‚Üì Q‚Ä≥‚ÇÄ) (y‚Ä† y‚Ä° : ‚Üì ·¥∫.zero) ‚Üí
                tgt ((id·∂† *·µá) (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏))) ((repl y *ÃÉ) R) ‚â° P‚Ä≤ ‚Üí tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ)) S ‚â° Q‚Ä≤ ‚Üí
                tgt ((id·∂† *·µá) (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏))) ((repl y‚Ä≤ *ÃÉ) R‚Ä≤) ‚â° P‚Ä≥ ‚Üí tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ)) S‚Ä≤ ‚â° Q‚Ä≥ ‚Üí
                braiding (·∂ú‚àá·∂ú {a = œÑ} {œÑ}) {0} Œ±
                [ ŒΩ [ (pop y‚Ä† *ÃÉ) P‚Ä≤ ‚îÇ Q‚Ä≤ ] ] ‚â° [ ŒΩ [ (pop y‚Ä° *ÃÉ) P‚Ä≥ ‚îÇ Q‚Ä≥ ] ]
{-
      base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ ‚â°P‚Ä≤ ‚â°Q‚Ä≤ ‚â°P‚Ä≥ ‚â°Q‚Ä≥ y‚Ä† y‚Ä° =
         let Œ≤ : (pop y‚Ä† *ÃÉ) P‚Ä≤ ‚âÖ (pop y‚Ä° *ÃÉ) P‚Ä≥
             Œ≤ = let open ‚âÖ-Reasoning in
                begin
                   (pop y‚Ä† *ÃÉ) P‚Ä≤
                ‚â°‚ü® cong (pop y‚Ä† *ÃÉ) (sym ‚â°P‚Ä≤) ‚ü©
                   (pop y‚Ä† *ÃÉ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) R)
                ‚â°‚ü® cong ((pop y‚Ä† *ÃÉ) ‚àò·∂† tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏))) (sym ‚â°R) ‚ü©
                   (pop y‚Ä† *ÃÉ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) ((tgt E P)))
                ‚âÖ‚ü® cheat y‚Ä† y‚Ä° ‚ü©
                   (pop y‚Ä° *ÃÉ) ((swap *ÃÉ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) (tgt E P)))
                ‚âÖ‚ü® ‚âÖ-cong‚ú¥ ‚Üì_ (Œ≥‚ÇÅ ùê∏) (pop y‚Ä° *ÃÉ) (‚âÖ-sym (reduce-·µá‚àá·µá (Œ≥‚ÇÅ ùê∏) _)) ‚ü©
                   (pop y‚Ä° *ÃÉ) (braiding ·µá‚àá·µá {0} (Œ≥‚ÇÅ ùê∏) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) (tgt E P)))
                ‚â°‚ü® cong (pop y‚Ä° *ÃÉ) IH‚ÇÅ ‚ü©
                   (pop y‚Ä° *ÃÉ) (tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏)) (tgt E‚Ä≤ P))
                ‚â°‚ü® cong ((pop y‚Ä° *ÃÉ) ‚àò·∂† tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏))) ‚â°R‚Ä≤ ‚ü©
                   (pop y‚Ä° *ÃÉ) (tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏)) R‚Ä≤)
                ‚â°‚ü® cong (pop y‚Ä° *ÃÉ) ‚â°P‚Ä≥ ‚ü©
                   (pop y‚Ä° *ÃÉ) P‚Ä≥
                ‚àé
             Œ¥ = Q‚Ä≤ ‚âÖ Q‚Ä≥
             Œ¥ = let open ‚âÖ-Reasoning in
                begin
                   Q‚Ä≤
                ‚â°‚ü® sym ‚â°Q‚Ä≤ ‚ü©
                   tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ)) S
                ‚â°‚ü® cong (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ))) (sym ‚â°S) ‚ü©
                   tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ)) (tgt F Q)
                ‚âÖ‚ü® ‚âÖ-sym (reduce-À£‚àáÀ£ {x = x} {u} (Œ≥‚ÇÅ ùêπ) _) ‚ü©
                   braiding (À£‚àáÀ£ {x = x} {u}) {0} (Œ≥‚ÇÅ ùêπ) (tgt (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ)) (tgt F Q))
                ‚â°‚ü® IH‚ÇÇ ‚ü©
                   tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ)) (tgt F‚Ä≤ Q)
                ‚â°‚ü® cong (tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ))) ‚â°S‚Ä≤ ‚ü©
                   tgt (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ)) S‚Ä≤
                ‚â°‚ü® ‚â°Q‚Ä≥ ‚ü©
                   Q‚Ä≥
                ‚àé
             open ‚âÖ-Reasoning in ‚âÖ-to-‚â° (
         begin
            braiding ·∂ú‚àá·∂ú {0} Œ± [ ŒΩ [ (pop y‚Ä† *ÃÉ) P‚Ä≤ ‚îÇ Q‚Ä≤ ] ]
         ‚âÖ‚ü® reduce-·∂ú‚àá·∂ú Œ± _ ‚ü©
            [ ŒΩ [ (pop y‚Ä† *ÃÉ) P‚Ä≤ ‚îÇ Q‚Ä≤ ] ]
         ‚âÖ‚ü® [ŒΩ-]-cong (cong‚ÇÇ _‚îÇ_ Œ≥ (Œ≥‚ÇÅ ùêπ)) ([-‚îÇ-]-cong Œ≥ Œ≤ (Œ≥‚ÇÅ ùêπ) Œ¥) ‚ü©
            [ ŒΩ [ (pop y‚Ä° *ÃÉ) P‚Ä≥ ‚îÇ Q‚Ä≥ ] ]
         ‚àé)
-}

      subcase :
          braiding (·∂ú‚àá·∂ú {a = œÑ} {œÑ}) {0} Œ±
          (œÄ‚ÇÇ (step‚Åª (ŒΩ·∂ú ((id·∂† *·µá) (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) ‚îÇ‚Ä¢ E‚Ä≤/E (‚äñ‚ÇÅ ùêπ))) (ŒΩ [ (repl y *ÃÉ) R ‚îÇ S ]))) ‚â°
          œÄ‚ÇÇ (step‚Åª (ŒΩ·∂ú ((id·∂† *·µá) (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏)) ‚îÇ‚Ä¢ E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ))) (ŒΩ [ (repl y‚Ä≤ *ÃÉ) R‚Ä≤ ‚îÇ S‚Ä≤ ]))
      subcase
         with step ((id·∂† *·µá) (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏))) ((repl y *ÃÉ) R) | step (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ)) S |
              step ((id·∂† *·µá) (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏))) ((repl y‚Ä≤ *ÃÉ) R‚Ä≤) | step (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ)) S‚Ä≤ |
              inspect (step ((id·∂† *·µá) (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)))) ((repl y *ÃÉ) R) | inspect (step (E‚Ä≤/E (‚äñ‚ÇÅ ùêπ))) S |
              inspect (step ((id·∂† *·µá) (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏)))) ((repl y‚Ä≤ *ÃÉ) R‚Ä≤) | inspect (step (E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ))) S‚Ä≤
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ |
         [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ y‚Ä† y‚Ä° (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥)
      ... | p‚Ä≤ , P‚Ä≤ | q‚Ä≤ , Q‚Ä≤ | p‚Ä≥ , P‚Ä≥ | q‚Ä≥ , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] = {!!}
{-
      ... | ‚óª , P‚Ä≤ | ‚óª , Q‚Ä≤ | ‚óª , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª ‚óª
      ... | ‚óª , P‚Ä≤ | ‚óª , Q‚Ä≤ | ‚óª , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª y‚Ä°
      ... | ‚óª , P‚Ä≤ | ‚óª , Q‚Ä≤ | [ (._ ‚Ä¢) ·µá ] , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª ‚óª
      ... | ‚óª , P‚Ä≤ | ‚óª , Q‚Ä≤ | [ (._ ‚Ä¢) ·µá ] , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª y‚Ä°
      ... | ‚óª , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | ‚óª , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† ‚óª
      ... | ‚óª , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | ‚óª , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† y‚Ä°
      ... | ‚óª , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† ‚óª
      ... | ‚óª , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† y‚Ä°
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | ‚óª , Q‚Ä≤ | ‚óª , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª ‚óª
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | ‚óª , Q‚Ä≤ | ‚óª , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª y‚Ä°
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | ‚óª , Q‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª ‚óª
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | ‚óª , Q‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) ‚óª y‚Ä°
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | ‚óª , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† ‚óª
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | ‚óª , P‚Ä≥ | [ ‚Ä¢ ._ ‚å© y‚Ä° ‚å™ ·∂ú ] , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† y‚Ä°
      ... | [ ._ ‚Ä¢ ·µá ] , P‚Ä≤ | [ ‚Ä¢ ._ ‚å© y‚Ä† ‚å™ ·∂ú ] , Q‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , P‚Ä≥ | ‚óª , Q‚Ä≥ | [ ‚â°P‚Ä≤ ] | [ ‚â°Q‚Ä≤ ] | [ ‚â°P‚Ä≥ ] | [ ‚â°Q‚Ä≥ ] =
         base P‚Ä≤ Q‚Ä≤ P‚Ä≥ Q‚Ä≥ (,-inj‚ÇÇ ‚â°P‚Ä≤) (,-inj‚ÇÇ ‚â°Q‚Ä≤) (,-inj‚ÇÇ ‚â°P‚Ä≥) (,-inj‚ÇÇ ‚â°Q‚Ä≥) y‚Ä† ‚óª
-}

   case :
      braiding (·∂ú‚àá·∂ú {a = œÑ} {œÑ}) {0} Œ±
      (tgt (ŒΩ·∂ú ((id·∂† *·µá) (E‚Ä≤/E (‚äñ‚ÇÅ ùê∏)) ‚îÇ‚Ä¢ E‚Ä≤/E (‚äñ‚ÇÅ ùêπ))) (tgt (E ‚îÇ·µ• F) [ P ‚îÇ Q ]))
      ‚â°
      (tgt (ŒΩ·∂ú ((id·∂† *·µá) (E/E‚Ä≤ (‚äñ‚ÇÅ ùê∏)) ‚îÇ‚Ä¢ E/E‚Ä≤ (‚äñ‚ÇÅ ùêπ))) (tgt (E‚Ä≤ ‚îÇ·µ• F‚Ä≤) [ P ‚îÇ Q ]))
   case
      with step E‚Ä≤ P | step E P | step F‚Ä≤ Q | step F Q |
           inspect (step E‚Ä≤) P | inspect (step E) P | inspect (step F‚Ä≤) Q | inspect (step F) Q
   ... | ‚óª , R‚Ä≤ | ‚óª , R | ‚óª , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | ‚óª , R | ‚óª , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | ‚óª , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | ‚óª , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | ‚óª , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | ‚óª , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | ‚óª , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | ‚óª , R | ‚óª , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | ‚óª , R | ‚óª , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | ‚óª , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | ‚óª , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | ‚óª , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | ‚óª , S‚Ä≤ | [ ‚Ä¢ ._ Ôπô y‚Ä≤ Ôπö ·µá ] , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ y‚Ä≤ ‚óª (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
   ... | [ ._ ‚Ä¢ ·µá ] , R‚Ä≤ | [ ._ ‚Ä¢ ·µá ] , R | [ ‚Ä¢ ._ Ôπô y Ôπö ·µá ] , S‚Ä≤ | ‚óª , S | [ ‚â°R‚Ä≤ ] | [ ‚â°R ] | [ ‚â°S‚Ä≤ ] | [ ‚â°S ] =
      subcase R R‚Ä≤ S S‚Ä≤ ‚óª y (,-inj‚ÇÇ ‚â°R) (,-inj‚ÇÇ ‚â°R‚Ä≤) (,-inj‚ÇÇ ‚â°S) (,-inj‚ÇÇ ‚â°S‚Ä≤)
